---
title: React, useCallback ì•Œì•„ë³´ê¸°
date: '2022-04-05'
summary: React, useCallback Hook ì´ë€?
publish: true
---

# useCallback? ğŸ¤”

```javascript
const memoizedCallback = useCallback(() => {
  doSomething(a, b);
}, [a, b]);
```

> ë©”ëª¨ì´ì œì´ì…˜ëœ ì½œë°±ì„ ë°˜í™˜í•©ë‹ˆë‹¤.

**useCallback**ì€ **useMemo**ì™€ ë¹„ìŠ·í•œ `Hook` ì…ë‹ˆë‹¤. ğŸ˜µ

í° ì°¨ì´ì ì€ `useMemo` ëŠ” **ê°’**ì„ ê¸°ì–µ(ë©”ëª¨ë¦¬ì œì´ì…˜)í–ˆì§€ë§Œ
`useCallback` ì€ **í•¨ìˆ˜ë¥¼ ê¸°ì–µí•˜ëŠ” ê²ƒì´ í° ì°¨ì´**ë¼ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ì˜ˆì‹œ ì½”ë“œ

```javascript
const ComponentThatRendersOften = ({ cb1, cb2 }) => {
  const [state, setState] = useState(...);

  const doSomething = () => {
    // ì—ë„ˆì§€ê°€ ë§ì´ ì†Œëª¨ë˜ëŠ” ì—°ì‚°
    ...
    setState(...);
    cb1();
  };

  return (
    <button onClick={doSomething} />
  );
};
```

**ì»´í¬ë„ŒíŠ¸ê°€ ëœë”ë§ë  ë•Œ ë§ˆë‹¤** ì—ë„ˆì§€ê°€ ë§ì´ ì†Œëª¨ë˜ëŠ” `doSomething` í•¨ìˆ˜ë¥¼ ë‹¤ì‹œ ì„ ì–¸í•©ë‹ˆë‹¤.

ì•„ì˜ˆ **ì»´í¬ë„ŒíŠ¸ì˜ ìŠ¤ì½”í”„ ë°–ìœ¼ë¡œ í•¨ìˆ˜ë¥¼ ì˜®ê¸°ëŠ” ë°©ë²•**ì´ ìˆì§€ë§Œ
ê·¸ëŸ´ ê²½ìš° í•¨ìˆ˜ì˜ íŒŒë¼ë¯¸í„°ë¥¼ ë§¤ë²ˆ ë„˜ê²¨ì¤˜ì•¼ í•˜ê¸° ë•Œë¬¸ì— **ê°€ë…ì„±**ì´ ë–¨ì–´ì§€ê²Œ ë©ë‹ˆë‹¤.

```javascript
const ComponentThatRendersOften = ({ cb1, cb2 }) => {
  const [state, setState] = useState(...);

  const doSomething = useCallback(() => {
    // ì—ë„ˆì§€ê°€ ë§ì´ ì†Œëª¨ë˜ëŠ” ì—°ì‚°
    ...
    setState(...);
    cb1();
  }, [cb1]);

  return (
    <button onClick={doSomething} />
  );
};

```

ì´ëŸ¬í•œ ìƒí™©ì—ì„œ `useCallback` í›…ì„ ì´ìš©í•˜ê²Œ ë˜ë©´
`deps` ë°°ì—´ì— ë“¤ì–´ê°€ëŠ” ë³€ìˆ˜ê°€ ë³€í•˜ì§€ ì•Šê²Œ ë˜ë©´ **í•´ë‹¹ í•¨ìˆ˜ë¥¼ ì¬ì„ ì–¸í•˜ì§€ ì•Šê²Œ ë©ë‹ˆë‹¤!**

### â— ì£¼ì˜ì‚¬í•­

> ë§Œì•½ì— **deps** ë°°ì—´ ì•ˆì— **í•¨ìˆ˜ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê°’**ì„ ë„£ì§€ ì•Šê²Œ ëœë‹¤ë©´,
> í•¨ìˆ˜ ë‚´ì—ì„œ í•´ë‹¹ ê°’ë“¤ì„ ì°¸ì¡°í•  ë•Œ
> **ê°€ì¥ ìµœì‹  ê°’ì„ ì°¸ì¡° í•  ê²ƒì´ë¼ê³  ë³´ì¥ í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. âŒ**
> (í•´ë‹¹ ê°’ì´ ì—…ë°ì´íŠ¸ê°€ ë˜ì—ˆëŠ”ì§€ **deps** ë°°ì—´ì—ì„œ í™•ì¸í•˜ë¯€ë¡œ)

## ìµœì í™”?

ìœ„ì™€ ê°™ì´ `useCallback` ê°€ ë°˜í™˜í•˜ëŠ” ë©”ëª¨ì´ì œì´ì…˜ëœ í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ë©´
ì»´í¬ë„ŒíŠ¸ì˜ ìµœì í™”ë¥¼ ì´ë£°ìˆ˜ ìˆê²Œ ë˜ì§€ë§Œ

ì‹¤ì œë¡œ ì»´í¬ë„ŒíŠ¸ê°€ ëœë”ë§ë  ë•Œ, í•¨ìˆ˜ ì„ ì–¸ê³¼ ê´€ë ¨ëœ ê²ƒì€
**ì„±ëŠ¥ ìµœì í™”**ì— **í° ë¬¸ì œê°€ ë˜ì§€ëŠ” ì•Šë‹¤**ê³  í•©ë‹ˆë‹¤..

**ê·¸ë ‡ë‹¤ë©´ `useCallback`ì€ ì–´ë–»ê²Œ ì“¸ ë•Œ ì˜ë¯¸ê°€ ìˆì„ê¹Œìš”? ğŸ™„**

### í•¨ìˆ˜ì˜ ë™ë“±ì„±

```javascript
> const add1 = () => x + y;
undefined
> const add2 = () => x + y;
undefined
> add1 === add2
false
```

`JavaScript`ì—ì„œëŠ” í•¨ìˆ˜ì˜ ë™ë“±í•¨ ë¹„êµëŠ” ìœ„ ê²°ê³¼ê°€ ë„ì¶œë©ë‹ˆë‹¤.
í•¨ìˆ˜ë„ ê°ì²´ ì·¨ê¸‰ì„ í•˜ê¸° ë•Œë¬¸ì—
í•¨ìˆ˜ ë¹„êµì— **ìƒˆë¡œìš´ ë©”ëª¨ë¦¬ ì£¼ì†Œì— ì˜í•œ ì°¸ì¡° ë¹„êµ**ê°€ ì¼ì–´ë‚˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

> **(ê²°êµ­ ë‹¤ë¥¸ ë©”ëª¨ë¦¬ì— ì €ì¥ë˜ë¯€ë¡œ ë™ë“±ì„± âŒ)**

<br />

#### ë™ë“±ì„± ë¬¸ì œ

**ì‹¤ì œ ì½”ë“œì—ì„œëŠ” ë™ë“±ì„±ì´ ë¬´ìŠ¨ ë¬¸ì œë¥¼ ì¼ìœ¼í‚¬ê¹Œìš”?**

```javascript
function Profile({ userId }) {
  const [user, setUser] = useState(null);

  const fetchUser = () =>
    fetch(`https://api/users/${userId}`)
      .then((response) => response.json())
      .then(({ user }) => user);

  useEffect(() => {
    fetchUser().then((user) => setUser(user));
  }, [fetchUser]);
}
```

**ìœ„ì™€ ê°™ì€ ì½”ë“œì—ì„œëŠ” ì•„ë˜ì™€ ê°™ì´ ì ˆì°¨ê°€ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.**

- ì»´í¬ë„ŒíŠ¸ ëœë”ë§ ê³¼ì •ì—ì„œ `fetchUser` í•¨ìˆ˜ê°€ ì„ ì–¸ë©ë‹ˆë‹¤.
- `uesEffect` í›…ìœ¼ë¡œ ì¸í•œ `fetchUser` í•¨ìˆ˜ê°€ ì‹¤í–‰ì´ ë©ë‹ˆë‹¤.
- í•´ë‹¹ í•¨ìˆ˜ì—ì„œ `user state`ë¥¼ ë³€í™”í•©ë‹ˆë‹¤.
- ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ ëœë”ë§ ë©ë‹ˆë‹¤. **(state ë³€í™”ë¡œ ì¸í•œ)**
- ì»´í¬ë„ŒíŠ¸ ëœë”ë§ ê³¼ì •ì—ì„œ `fetchUser` í•¨ìˆ˜ê°€ ì„ ì–¸ë©ë‹ˆë‹¤. **(ë™ë“±ì„± ë¬¸ì œë¡œ ë‹¤ë¥¸ í•¨ìˆ˜ ì·¨ê¸‰)**
- `uesEffect` í›…ìœ¼ë¡œ ì¸í•œ `fetchUser` í•¨ìˆ˜ê°€ ì‹¤í–‰ì´ ë©ë‹ˆë‹¤.
- **...ë¬´í•œë£¨í”„ ğŸ¤ª**

**ë™ë“±ì„± ë¬¸ì œë¡œ ë¬´í•œë£¨í”„ê°€ ë°œìƒí•˜ê³  ìˆìŠµë‹ˆë‹¤ â—ï¸**

#### ë™ë“±ì„± ë¬¸ì œ í•´ê²° (useCallback)

```javascript
function Profile({ userId }) {
  const [user, setUser] = useState(null);

  const fetchUser = useCallback(
    () =>
      fetch(`https://api/users/${userId}`)
        .then((response) => response.json())
        .then(({ user }) => user),
    [userId],
  );

  useEffect(() => {
    fetchUser().then((user) => setUser(user));
  }, [fetchUser]);
}
```

ì´ëŸ¬í•œ ìƒí™©ì—ì„œ `useCallback` ì„ ì‚¬ìš©í•©ì‹œë‹¤!

- ì»´í¬ë„ŒíŠ¸ ëœë”ë§ ê³¼ì •ì—ì„œ `fetchUser` í•¨ìˆ˜ê°€ ì„ ì–¸ë©ë‹ˆë‹¤.
- `uesEffect` í›…ìœ¼ë¡œ ì¸í•œ `fetchUser` í•¨ìˆ˜ê°€ ì‹¤í–‰ì´ ë©ë‹ˆë‹¤.
- í•´ë‹¹ í•¨ìˆ˜ì—ì„œ `user state`ë¥¼ ë³€í™”í•©ë‹ˆë‹¤.
- ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ ëœë”ë§ ë©ë‹ˆë‹¤. **(state ë³€í™”ë¡œ ì¸í•œ)**
- ì»´í¬ë„ŒíŠ¸ ëœë”ë§ ê³¼ì •ì—ì„œ `fetchUser` í•¨ìˆ˜ê°€ ì„ ì–¸ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
  (`useCallback`ì˜ `deps` ë°°ì—´ ë³€í™”ê°€ ì—†ìœ¼ë¯€ë¡œ **ê¸°ì¡´ì— ìˆë˜ í•¨ìˆ˜ ì¬ì‚¬ìš©!**)

## ê²°ë¡ 

ìµœì í™”ë¥¼ ìœ„í•´ `useMemo`, `useCallback`ê³¼ ê°™ì€ í›…ì€ ì¤‘ìš”í•˜ì§€ë§Œ
ë¬´ì¡°ê±´ ì‚¬ìš©í•˜ì§€ ì•Šê³  **ì½”ë“œì˜ ë³µì¡ì„±ê³¼ ìœ ì§€ë³´ìˆ˜**ë¥¼ ìœ„í•´
ì‹¤ì§ˆì ì¸ ì„±ëŠ¥ í–¥ìƒì„ ê³„ì‚°í•˜ê³  ì´ìš©í•´ì•¼ê² ìŠµë‹ˆë‹¤.

---

> ë„ì›€ ë°›ì€ ê¸€
>
> [https://ko.reactjs.org/docs/hooks-reference.html#usecallback](https://ko.reactjs.org/docs/hooks-reference.html#usecallback)
>
> [https://im-developer.tistory.com/198](https://im-developer.tistory.com/198)
>
> [https://www.daleseo.com/react-hooks-use-callback/](https://www.daleseo.com/react-hooks-use-callback/)
